<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krishi-Sahayak AI - Farming Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 90%;
        }
        
        .header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .header h1 {
            color: #2d5a27;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .header p {
            color: #666;
            font-size: 1.1rem;
        }
        
        .demo-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .language-buttons {
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .lang-btn {
            background: #ddd;
            color: #333;
            border: none;
            padding: 0.5rem 1.5rem;
            margin: 0 0.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
        }
        
        .lang-btn.active {
            background: #4CAF50;
            color: white;
        }
        
        .voice-section {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .mic-button {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            border: none;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 1rem;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        
        .mic-button:hover {
            transform: scale(1.1);
        }
        
        .mic-button.listening {
            background: linear-gradient(45deg, #f44336, #d32f2f);
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .input-section {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .input-group {
            flex: 1;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #4CAF50;
        }
        
        .btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        
        .speak-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .speak-btn:hover {
            background: #1976D2;
        }
        
        .response-area {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1rem;
            min-height: 150px;
        }
        
        .response-content {
            line-height: 1.6;
        }
        
        .weather-widget {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .market-price {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
        }
        
        .disease-detection {
            border: 2px dashed #4CAF50;
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            margin: 1rem 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .disease-detection:hover {
            background: #f8f9fa;
            border-color: #45a049;
        }
        
        .uploaded-image {
            max-width: 200px;
            max-height: 200px;
            border-radius: 10px;
            margin: 1rem 0;
        }
        
        .status {
            text-align: center;
            margin: 1rem 0;
            font-weight: bold;
        }
        
        .loading {
            color: #ff9800;
        }
        
        .success {
            color: #4CAF50;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåæ Krishi-Sahayak AI</h1>
            <p id="subtitle">Your Smart Farming Assistant - Voice-Enabled Agricultural Advisor</p>
        </div>
        
        <div class="demo-section">
            <div class="language-buttons">
                <button class="lang-btn active" id="engBtn" onclick="setLanguage('english')">English</button>
                <button class="lang-btn" id="hinBtn" onclick="setLanguage('hindi')">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
                <button class="lang-btn" id="punBtn" onclick="setLanguage('punjabi')">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</button>
            </div>
        </div>
        
        <div class="demo-section">
            <h3 id="voiceTitle">üé§ Voice Assistant (Demo)</h3>
            <div class="voice-section">
                <button class="mic-button" id="micButton" onclick="startVoice()">üé§</button>
                <p id="voiceInstructions">Click the microphone and ask your farming question</p>
                <div id="voiceStatus" class="status"></div>
            </div>
        </div>
        
        <div class="demo-section">
            <h3 id="questionTitle">üí¨ Ask Your Farming Question</h3>
            <div class="input-section">
                <div class="input-group">
                    <input type="text" id="questionInput" placeholder="Ask your farming question here...">
                </div>
                <div class="input-group">
                    <select id="locationSelect">
                        <option value="kharar">Kharar, Punjab</option>
                        <option value="ludhiana">Ludhiana, Punjab</option>
                        <option value="amritsar">Amritsar, Punjab</option>
                        <option value="patiala">Patiala, Punjab</option>
                    </select>
                </div>
                <button class="btn" id="adviceBtn" onclick="getAdvice()">Get AI Advice</button>
            </div>
        </div>
        
        <div class="demo-section">
            <h3 id="diseaseTitle">üì∑ Crop Disease Detection</h3>
            <div class="disease-detection" onclick="document.getElementById('imageUpload').click()">
                <input type="file" id="imageUpload" accept="image/*" style="display: none;" onchange="analyzeImage()">
                <p id="diseaseText">üì∏ Click here to upload a photo of your crop for instant disease analysis</p>
                <img id="uploadedImage" class="uploaded-image" style="display: none;">
            </div>
        </div>
        
        <div class="response-area">
            <h3 id="responseTitle">ü§ñ AI Assistant Response:</h3>
            <div id="responseContent" class="response-content">
                <p id="defaultMessage" style="color: #666; font-style: italic;">Ask me anything about farming, and I'll provide expert advice!</p>
            </div>
        </div>
    </div>

    <script>
        let currentLanguage = 'english';
        let isListening = false;
        let recognition;

        // Farm responses for all languages
        const farmResponses = {
            english: {
                wheat: "Yellow wheat leaves indicate nitrogen deficiency. Apply 10kg urea per acre. Weather is favorable for application.",
                tomato: "Yellow tomato leaves suggest nutrient deficiency or overwatering. Ensure proper drainage and balanced fertilization.",
                weather: "Today's weather: Partly cloudy, 28¬∞C, humidity 65%. Good conditions for field operations.",
                price: "Current wheat prices: Kharar Mandi - ‚Çπ2,150/quintal, Ludhiana Mandi - ‚Çπ2,180/quintal."
            },
            hindi: {
                wheat: "‡§ó‡•á‡§π‡•Ç‡§Ç ‡§ï‡•Ä ‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§™‡•Ä‡§≤‡§æ ‡§π‡•ã‡§®‡§æ ‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§® ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä ‡§¶‡§ø‡§ñ‡§æ‡§§‡§æ ‡§π‡•à‡•§ 10 ‡§ï‡§ø‡§≤‡•ã ‡§Ø‡•Ç‡§∞‡§ø‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡§ø ‡§è‡§ï‡§°‡§º ‡§°‡§æ‡§≤‡•á‡§Ç‡•§ ‡§Æ‡•å‡§∏‡§Æ ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤ ‡§π‡•à‡•§",
                tomato: "‡§ü‡§Æ‡§æ‡§ü‡§∞ ‡§ï‡•Ä ‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§™‡•Ä‡§≤‡§æ ‡§π‡•ã‡§®‡§æ ‡§™‡•ã‡§∑‡§ï ‡§§‡§§‡•ç‡§µ‡•ã‡§Ç ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä ‡§Ø‡§æ ‡§Ö‡§ß‡§ø‡§ï ‡§™‡§æ‡§®‡•Ä ‡§ï‡§æ ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§π‡•à‡•§",
                weather: "‡§Ü‡§ú ‡§ï‡§æ ‡§Æ‡•å‡§∏‡§Æ: ‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§¨‡§æ‡§¶‡§≤, 28¬∞C, ‡§®‡§Æ‡•Ä 65%‡•§ ‡§ñ‡•á‡§§‡•Ä ‡§ï‡•á ‡§ï‡§æ‡§Æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§™‡§∞‡§ø‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡§æ‡§Ç‡•§",
                price: "‡§ó‡•á‡§π‡•Ç‡§Ç ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç: ‡§ñ‡§∞‡§°‡§º ‡§Æ‡§Ç‡§°‡•Ä - ‚Çπ2,150/‡§ï‡•ç‡§µ‡§ø‡§Ç‡§ü‡§≤, ‡§≤‡•Å‡§ß‡§ø‡§Ø‡§æ‡§®‡§æ ‡§Æ‡§Ç‡§°‡•Ä - ‚Çπ2,180/‡§ï‡•ç‡§µ‡§ø‡§Ç‡§ü‡§≤‡•§"
            },
            punjabi: {
                wheat: "‡®ï‡®£‡®ï ‡®¶‡©á ‡®™‡©±‡®§‡©á ‡®™‡©Ä‡®≤‡©á ‡®π‡©ã‡®£‡®æ ‡®®‡®æ‡®à‡®ü‡®∞‡©ã‡®ú‡®® ‡®¶‡©Ä ‡®ï‡®Æ‡©Ä ‡®¶‡®∞‡®∏‡®æ‡®â‡®Ç‡®¶‡®æ ‡®π‡©à‡•§ 10 ‡®ï‡®ø‡©±‡®≤‡©ã ‡®Ø‡©Ç‡®∞‡©Ä‡®Ü ‡®™‡©ç‡®∞‡®§‡©Ä ‡®è‡®ï‡©ú ‡®™‡®æ‡®ì‡•§ ‡®Æ‡©å‡®∏‡®Æ ‡®Ö‡®®‡©Å‡®ï‡©Ç‡®≤ ‡®π‡©à‡•§",
                tomato: "‡®ü‡®Æ‡®æ‡®ü‡®∞ ‡®¶‡©á ‡®™‡©±‡®§‡®ø‡®Ü‡®Ç ‡®¶‡®æ ‡®™‡©Ä‡®≤‡®æ ‡®π‡©ã‡®£‡®æ ‡®™‡©å‡®∏‡®º‡®ü‡®ø‡®ï ‡®§‡©±‡®§‡®æ‡®Ç ‡®¶‡©Ä ‡®ï‡®Æ‡©Ä ‡®ú‡®æ‡®Ç ‡®ú‡®º‡®ø‡®Ü‡®¶‡®æ ‡®™‡®æ‡®£‡©Ä ‡®¶‡®æ ‡®∏‡©∞‡®ï‡©á‡®§ ‡®π‡©à‡•§",
                weather: "‡®Ö‡©±‡®ú ‡®¶‡®æ ‡®Æ‡©å‡®∏‡®Æ: ‡®Ö‡©∞‡®∏‡®º‡®ï ‡®¨‡©±‡®¶‡®≤, 28¬∞C, ‡®®‡®Æ‡©Ä 65%‡•§ ‡®ñ‡©á‡®§‡©Ä ‡®¶‡©á ‡®ï‡©∞‡®Æ ‡®≤‡®à ‡®ö‡©∞‡®ó‡©Ä‡®Ü‡®Ç ‡®∏‡®•‡®ø‡®§‡©Ä‡®Ü‡®Ç‡•§",
                price: "‡®ï‡®£‡®ï ‡®¶‡©Ä‡®Ü‡®Ç ‡®ï‡©Ä‡®Æ‡®§‡®æ‡®Ç: ‡®ñ‡®∞‡©ú ‡®Æ‡©∞‡®°‡©Ä - ‚Çπ2,150/‡®ï‡©Å‡®á‡©∞‡®ü‡®≤, ‡®≤‡©Å‡®ß‡®ø‡®Ü‡®£‡®æ ‡®Æ‡©∞‡®°‡©Ä - ‚Çπ2,180/‡®ï‡©Å‡®á‡©∞‡®ü‡®≤‡•§"
            }
        };

        // UI translations
        const uiTexts = {
            english: {
                subtitle: "Your Smart Farming Assistant - Voice-Enabled Agricultural Advisor",
                voiceTitle: "üé§ Voice Assistant (Demo)",
                voiceInstructions: "Click the microphone and ask your farming question",
                questionTitle: "üí¨ Ask Your Farming Question",
                questionPlaceholder: "Ask your farming question here...",
                adviceBtn: "Get AI Advice",
                diseaseTitle: "üì∑ Crop Disease Detection",
                diseaseText: "üì∏ Click here to upload a photo of your crop for instant disease analysis",
                responseTitle: "ü§ñ AI Assistant Response:",
                defaultMessage: "Ask me anything about farming, and I'll provide expert advice!",
                analyzing: "ü§ñ AI is analyzing your question...",
                speakBtn: "üîä Speak Answer"
            },
            hindi: {
                subtitle: "‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§ï‡•É‡§∑‡§ø ‡§∏‡§π‡§æ‡§Ø‡§ï - ‡§Ü‡§µ‡§æ‡§ú-‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§ï‡•É‡§∑‡§ø ‡§∏‡§≤‡§æ‡§π‡§ï‡§æ‡§∞",
                voiceTitle: "üé§ ‡§Ü‡§µ‡§æ‡§ú ‡§∏‡§π‡§æ‡§Ø‡§ï (‡§°‡•á‡§Æ‡•ã)",
                voiceInstructions: "‡§Æ‡§æ‡§á‡§ï‡•ç‡§∞‡•ã‡§´‡•ã‡§® ‡§¶‡§¨‡§æ‡§è‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡§æ ‡§ï‡•É‡§∑‡§ø ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç",
                questionTitle: "üí¨ ‡§Ö‡§™‡§®‡§æ ‡§ï‡•É‡§∑‡§ø ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç",
                questionPlaceholder: "‡§Ø‡§π‡§æ‡§Ç ‡§Ö‡§™‡§®‡§æ ‡§ï‡•É‡§∑‡§ø ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç...",
                adviceBtn: "AI ‡§∏‡§≤‡§æ‡§π ‡§≤‡•á‡§Ç",
                diseaseTitle: "üì∑ ‡§´‡§∏‡§≤ ‡§∞‡•ã‡§ó ‡§ú‡§æ‡§Ç‡§ö",
                diseaseText: "üì∏ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§∞‡•ã‡§ó ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡•Ä ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",
                responseTitle: "ü§ñ AI ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ:",
                defaultMessage: "‡§ñ‡•á‡§§‡•Ä ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ ‡§≠‡•Ä ‡§™‡•Ç‡§õ‡•á‡§Ç, ‡§î‡§∞ ‡§Æ‡•à‡§Ç ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û ‡§∏‡§≤‡§æ‡§π ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•Ç‡§Ç‡§ó‡§æ!",
                analyzing: "ü§ñ AI ‡§Ü‡§™‡§ï‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à...",
                speakBtn: "üîä ‡§¨‡•ã‡§≤‡•á‡§Ç"
            },
            punjabi: {
                subtitle: "‡®§‡©Å‡®π‡®æ‡®°‡®æ ‡®∏‡®Æ‡®æ‡®∞‡®ü ‡®ñ‡©á‡®§‡©Ä‡®¨‡®æ‡©ú‡©Ä ‡®∏‡®π‡®æ‡®á‡®ï - ‡®Ü‡®µ‡®æ‡®ú‡®º-‡®∏‡®Æ‡®∞‡®• ‡®ñ‡©á‡®§‡©Ä‡®¨‡®æ‡©ú‡©Ä ‡®∏‡®≤‡®æ‡®π‡®ï‡®æ‡®∞",
                voiceTitle: "üé§ ‡®Ü‡®µ‡®æ‡®ú‡®º ‡®∏‡®π‡®æ‡®á‡®ï (‡®°‡©à‡®Æ‡©ã)",
                voiceInstructions: "‡®Æ‡®æ‡®à‡®ï‡©ç‡®∞‡©ã‡®´‡®º‡©ã‡®® ‡®¶‡®¨‡®æ‡®ì ‡®Ö‡®§‡©á ‡®Ü‡®™‡®£‡®æ ‡®ñ‡©á‡®§‡©Ä‡®¨‡®æ‡©ú‡©Ä ‡®∏‡®µ‡®æ‡®≤ ‡®™‡©Å‡©±‡®õ‡©ã",
                questionTitle: "üí¨ ‡®Ü‡®™‡®£‡®æ ‡®ñ‡©á‡®§‡©Ä‡®¨‡®æ‡©ú‡©Ä ‡®∏‡®µ‡®æ‡®≤ ‡®™‡©Å‡©±‡®õ‡©ã",
                questionPlaceholder: "‡®á‡©±‡®•‡©á ‡®Ü‡®™‡®£‡®æ ‡®ñ‡©á‡®§‡©Ä‡®¨‡®æ‡©ú‡©Ä ‡®∏‡®µ‡®æ‡®≤ ‡®™‡©Å‡©±‡®õ‡©ã...",
                adviceBtn: "AI ‡®∏‡®≤‡®æ‡®π ‡®≤‡®ì",
                diseaseTitle: "üì∑ ‡®´‡®∏‡®≤ ‡®¨‡®ø‡®Æ‡®æ‡®∞‡©Ä ‡®ú‡®æ‡®Ç‡®ö",
                diseaseText: "üì∏ ‡®§‡©Å‡®∞‡©∞‡®§ ‡®¨‡®ø‡®Æ‡®æ‡®∞‡©Ä ‡®µ‡®ø‡®∏‡®º‡®≤‡©á‡®∏‡®º‡®£ ‡®≤‡®à ‡®Ü‡®™‡®£‡©Ä ‡®´‡®∏‡®≤ ‡®¶‡©Ä ‡®§‡®∏‡®µ‡©Ä‡®∞ ‡®Ö‡©±‡®™‡®≤‡©ã‡®° ‡®ï‡®∞‡©ã",
                responseTitle: "ü§ñ AI ‡®∏‡®π‡®æ‡®á‡®ï ‡®¶‡®æ ‡®ú‡®µ‡®æ‡®¨:",
                defaultMessage: "‡®ñ‡©á‡®§‡©Ä‡®¨‡®æ‡©ú‡©Ä ‡®¨‡®æ‡®∞‡©á ‡®ï‡©Å‡®ù ‡®µ‡©Ä ‡®™‡©Å‡©±‡®õ‡©ã, ‡®Ö‡®§‡©á ‡®Æ‡©à‡®Ç ‡®Æ‡®æ‡®π‡®∞ ‡®∏‡®≤‡®æ‡®π ‡®¶‡©Ç‡©∞‡®ó‡®æ!",
                analyzing: "ü§ñ AI ‡®§‡©Å‡®π‡®æ‡®°‡©á ‡®∏‡®µ‡®æ‡®≤ ‡®¶‡®æ ‡®µ‡®ø‡®∏‡®º‡®≤‡©á‡®∏‡®º‡®£ ‡®ï‡®∞ ‡®∞‡®ø‡®π‡®æ ‡®π‡©à...",
                speakBtn: "üîä ‡®ú‡®µ‡®æ‡®¨ ‡®¨‡©ã‡®≤‡©ã"
            }
        };

        function setLanguage(lang) {
            currentLanguage = lang;
            updateUI();
            
            // Update button styles
            document.getElementById('engBtn').className = 'lang-btn' + (lang === 'english' ? ' active' : '');
            document.getElementById('hinBtn').className = 'lang-btn' + (lang === 'hindi' ? ' active' : '');
            document.getElementById('punBtn').className = 'lang-btn' + (lang === 'punjabi' ? ' active' : '');
        }

        function updateUI() {
            const ui = uiTexts[currentLanguage];
            document.getElementById('subtitle').textContent = ui.subtitle;
            document.getElementById('voiceTitle').textContent = ui.voiceTitle;
            document.getElementById('voiceInstructions').textContent = ui.voiceInstructions;
            document.getElementById('questionTitle').textContent = ui.questionTitle;
            document.getElementById('questionInput').placeholder = ui.questionPlaceholder;
            document.getElementById('adviceBtn').textContent = ui.adviceBtn;
            document.getElementById('diseaseTitle').textContent = ui.diseaseTitle;
            document.getElementById('diseaseText').textContent = ui.diseaseText;
            document.getElementById('responseTitle').textContent = ui.responseTitle;
            document.getElementById('defaultMessage').textContent = ui.defaultMessage;
        }

        function startVoice() {
            if (isListening) {
                if (recognition) recognition.stop();
                return;
            }
            
            try {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                if (!SpeechRecognition) {
                    alert('Voice recognition not supported. Please type your question.');
                    return;
                }
                
                recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = currentLanguage === 'hindi' ? 'hi-IN' : currentLanguage === 'punjabi' ? 'pa-IN' : 'en-IN';
                
                recognition.onstart = function() {
                    isListening = true;
                    document.getElementById('micButton').classList.add('listening');
                    document.getElementById('voiceStatus').innerHTML = 'üé§ Listening... Speak now!';
                };
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('questionInput').value = transcript;
                    document.getElementById('voiceStatus').innerHTML = '‚úÖ Heard: "' + transcript + '"';
                    setTimeout(() => getAdvice(), 1000);
                };
                
                recognition.onerror = function() {
                    isListening = false;
                    document.getElementById('micButton').classList.remove('listening');
                    document.getElementById('voiceStatus').innerHTML = '‚ùå Voice error. Please try typing.';
                };
                
                recognition.onend = function() {
                    isListening = false;
                    document.getElementById('micButton').classList.remove('listening');
                };
                
                recognition.start();
                
            } catch (error) {
                alert('Voice recognition not available.');
            }
        }

        function getAdvice() {
            const question = document.getElementById('questionInput').value.toLowerCase();
            const location = document.getElementById('locationSelect').value;
            
            if (!question.trim()) {
                alert('Please ask a question!');
                return;
            }
            
            // Show loading
            const ui = uiTexts[currentLanguage];
            document.getElementById('responseContent').innerHTML = '<p style="color: #ff9800;">' + ui.analyzing + '</p>';
            
            setTimeout(() => {
                const response = generateResponse(question, location);
                document.getElementById('responseContent').innerHTML = response;
            }, 2000);
        }

        function generateResponse(question, location) {
            const responses = farmResponses[currentLanguage];
            let advice = '';
            
            // Simple logic for all languages
            if (question.includes('yellow') || question.includes('‡§™‡•Ä‡§≤‡•Ä') || question.includes('‡®™‡©Ä‡®≤‡©á') || 
                question.includes('wheat') || question.includes('‡§ó‡•á‡§π‡•Ç‡§Ç') || question.includes('‡®ï‡®£‡®ï')) {
                advice = responses.wheat;
            } else if (question.includes('tomato') || question.includes('‡§ü‡§Æ‡§æ‡§ü‡§∞') || question.includes('‡®ü‡®Æ‡®æ‡®ü‡®∞')) {
                advice = responses.tomato;
            } else if (question.includes('weather') || question.includes('‡§Æ‡•å‡§∏‡§Æ') || question.includes('‡®Æ‡©å‡®∏‡®Æ')) {
                advice = responses.weather;
            } else if (question.includes('price') || question.includes('‡§ï‡•Ä‡§Æ‡§§') || question.includes('‡®≠‡®æ‡®Ö')) {
                advice = responses.price;
            } else {
                advice = responses.wheat; // Default
            }
            
            const locationName = location.charAt(0).toUpperCase() + location.slice(1);
            let analysisText = currentLanguage === 'punjabi' ? `${locationName}, ‡®™‡©∞‡®ú‡®æ‡®¨ ‡®≤‡®à AI ‡®µ‡®ø‡®∏‡®º‡®≤‡©á‡®∏‡®º‡®£` :
                                 currentLanguage === 'hindi' ? `${locationName}, ‡§™‡§Ç‡§ú‡§æ‡§¨ ‡§ï‡•á ‡§≤‡§ø‡§è AI ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£` :
                                 `AI Analysis for ${locationName}, Punjab`;
            
            let weatherText = currentLanguage === 'punjabi' ? '‡®Æ‡©å‡®ú‡©Ç‡®¶‡®æ ‡®Æ‡©å‡®∏‡®Æ' :
                                currentLanguage === 'hindi' ? '‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•å‡§∏‡§Æ' : 'Current Weather';
            
            let recommendationText = currentLanguage === 'punjabi' ? '‡®∏‡®ø‡®´‡®æ‡®∞‡®∏‡®º' :
                                       currentLanguage === 'hindi' ? '‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂' : 'Recommendation';
            
            let response = `<h4>üéØ ${analysisText}:</h4>`;
            
            // Weather widget
            response += `
                <div class="weather-widget">
                    <div>
                        <h4>üå§Ô∏è ${weatherText}</h4>
                        <p>28¬∞C, ${currentLanguage === 'punjabi' ? '‡®Ö‡©∞‡®∏‡®º‡®ø‡®ï ‡®¨‡©±‡®¶‡®≤' : 
                                    currentLanguage === 'hindi' ? '‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§¨‡§æ‡§¶‡§≤' : 'Partly Cloudy'}, 
                                    ${currentLanguage === 'punjabi' ? '‡®®‡®Æ‡©Ä' : 
                                      currentLanguage === 'hindi' ? '‡§®‡§Æ‡•Ä' : 'Humidity'}: 65%</p>
                    </div>
                    <div style="font-size: 2rem;">‚òÅÔ∏è</div>
                </div>
            `;
            
            // Main advice
            response += `<div style="background: #e8f5e8; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
                <h4>üí° ${recommendationText}:</h4>
                <p>${advice}</p>`;
                
            const speakBtnText = uiTexts[currentLanguage].speakBtn;
            response += `<button class="speak-btn" onclick="speakText('${advice.replace(/'/g, "\\'")}', '${currentLanguage}')">
                ${speakBtnText}
            </button>`;
            
            response += `</div>`;
            
            return response;
        }

        function speakText(text, language) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                
                const msg = new SpeechSynthesisUtterance(text);
                msg.rate = 0.8;
                msg.pitch = 1;
                msg.volume = 0.9;
                
                if (language === 'hindi') {
                    msg.lang = 'hi-IN';
                } else if (language === 'punjabi') {
                    msg.lang = 'pa-IN';
                } else {
                    msg.lang = 'en-US';
                }
                
                window.speechSynthesis.speak(msg);
                
                // Visual feedback
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = language === 'hindi' ? 'üîä ‡§¨‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à...' : language === 'punjabi' ? 'üîä ‡®¨‡©ã‡®≤ ‡®∞‡®ø‡®π‡®æ ‡®π‡©à...' : 'üîä Speaking...';
                btn.disabled = true;
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.disabled = false;
                }, 3000);
                
            } else {
                alert('Speech not supported in this browser.');
            }
        }

        function analyzeImage() {
            const file = document.getElementById('imageUpload').files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = document.getElementById('uploadedImage');
                img.src = e.target.result;
                img.style.display = 'block';
                
                const ui = uiTexts[currentLanguage];
                document.getElementById('responseContent').innerHTML = '<p style="color: #ff9800;">ü§ñ Analyzing image...</p>';
                
                setTimeout(() => {
                    let diseaseText = currentLanguage === 'punjabi' ? '‡®Ö‡®∞‡®≤‡©Ä ‡®¨‡®≤‡®æ‡®à‡®ü ‡®¶‡©Ä ‡®™‡®π‡®ø‡®ö‡®æ‡®£ ‡®π‡©ã‡®à ‡®π‡©à‡•§ ‡®™‡©ç‡®∞‡®≠‡®æ‡®µ‡®ø‡®§ ‡®™‡©±‡®§‡©á ‡®π‡®ü‡®æ‡®ì ‡®Ö‡®§‡©á ‡®§‡®æ‡®Ç‡®¨‡©á-‡®Ü‡®ß‡®æ‡®∞‡®ø‡®§ ‡®´‡©∞‡®ó‡©Ä‡®∏‡®æ‡®à‡®° ‡®¶‡®æ ‡®õ‡®ø‡©ú‡®ï‡®æ‡®Ö ‡®ï‡®∞‡©ã‡•§' :
                                          currentLanguage === 'hindi' ? '‡§Ö‡§∞‡•ç‡§≤‡•Ä ‡§¨‡•ç‡§≤‡§æ‡§á‡§ü ‡§ï‡•Ä ‡§™‡§π‡§ö‡§æ‡§® ‡§π‡•Å‡§à ‡§π‡•à‡•§ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§π‡§ü‡§æ‡§è‡§Ç ‡§î‡§∞ ‡§ï‡•â‡§™‡§∞-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§´‡§Ç‡§ó‡•Ä‡§∏‡§æ‡§á‡§° ‡§ï‡§æ ‡§õ‡§ø‡§°‡§º‡§ï‡§æ‡§µ ‡§ï‡§∞‡•á‡§Ç‡•§' :
                                          'Early Blight detected. Remove affected leaves and spray with copper-based fungicide.';
                    
                    document.getElementById('responseContent').innerHTML = `
                        <h4>üì∑ ${currentLanguage === 'punjabi' ? 'AI ‡®¶‡©ç‡®∞‡®ø‡®∏‡®º‡®ü‡©Ä ‡®µ‡®ø‡®∏‡®º‡®≤‡©á‡®∏‡®º‡®£' : 
                                     currentLanguage === 'hindi' ? 'AI ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£' : 'AI Vision Analysis'}:</h4>
                        <div style="background: #fff; border: 2px solid #4CAF50; border-radius: 15px; padding: 1.5rem;">
                            <h3 style="color: #d32f2f;">ü¶† ${currentLanguage === 'punjabi' ? '‡®™‡®π‡®ø‡®ö‡®æ‡®£' : 
                                                            currentLanguage === 'hindi' ? '‡§™‡§π‡§ö‡§æ‡§®' : 'Detected'}: Early Blight</h3>
                            <p><strong>${currentLanguage === 'punjabi' ? '‡®µ‡®ø‡®∏‡®º‡®µ‡®æ‡®∏ ‡®™‡©±‡®ß‡®∞' : 
                                          currentLanguage === 'hindi' ? '‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§∏‡•ç‡§§‡§∞' : 'Confidence'}:</strong> 87%</p>
                            <p><strong>${currentLanguage === 'punjabi' ? '‡®â‡®™‡®ö‡®æ‡®∞' : 
                                          currentLanguage === 'hindi' ? '‡§â‡§™‡§ö‡§æ‡§∞' : 'Treatment'}:</strong></p>
                            <p>${diseaseText}</p>
                        </div>
                    `;
                }, 3000);
            };
            reader.readAsDataURL(file);
        }
    </script>
</body>
</html>